# PHP - Bypass using filters

PHP filters can sometimes be exploited to read the source code of a PHP file if the server is misconfigured and allows [Local File Inclusion](local-file-inclusion.md) or direct access to PHP stream wrappers. This occurs when the _allow\_url\_include_ and _allow\_url\_fopen_ parameters are enabled on the _php.ini_ file.

LFI on PHP files usually wonâ€™t display the source code, because when included, the PHP interpreter executes the file instead of showing its contents, but using the PHP filters we can have access to the source code instead of executing the file.

Here we found how this can be exploited:

* Use payload to retrieve the source code of a PHP file

{% code overflow="wrap" lineNumbers="true" %}
```bash
php://filter/convert.base64-encode/resource=$pathToPHPfile
php://filter/convert.base64-encode/resource=db.php #Example with a default php db
```
{% endcode %}

***

* If direct file access via _php://filter_ is blocked, we can use it indirectly in a confirmed LFI point

{% code overflow="wrap" lineNumbers="true" %}
```bash
vulnerable.php?file=php://filter/convert.base64-encode/resource=$pathToPHPfile
```
{% endcode %}
